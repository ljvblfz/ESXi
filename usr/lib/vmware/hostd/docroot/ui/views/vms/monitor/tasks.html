<div ng-if="tabs.tasks.loaded || vmMonitorTabs.tabs[vmMonitorTabs.selectedTabIndex].state === tabs.tasks.state"
     ng-controller="VMTasksController" class="esx-tab-content">

   <div ng-show="!loaded" class="loading"></div>

   <div ng-show="loaded" vui-datagrid="taskGrid" id="{{taskGrid.id}}"></div>

   <hr ng-if="currentTask" style="margin-top: 20px; margin-bottom: 20px;"/>

   <div ng-if="currentTask" class="row header-area no-margin key-information">
      <div class="col-sm-12 col-lg-12 info-block no-padding">
         <div class="col-sm-2 col-lg-2 no-padding identifying-graphic">
            <img src="images/task/task32.png" alt="{{'vm.monitor.tasks.alt'|translate}}"/>
         </div>
         <div class="key-information col-sm-10 col-lg-10">
            <div class="row">
               <div class="col-sm-12 title no-padding">
                  <span class="object-title" ng-bind="currentTask.name"></span>
               </div>
            </div>
            <div class="row" style="margin-bottom: 6px;">
               <span
                  class="col-sm-2 col-lg-2 control-label esx-label no-padding">{{'vm.monitor.tasks.key' | translate}}</span>
               <div class="col-sm-10 col-lg-10 no-padding">
                  <p class="form-control-static">{{currentTask.key}}</p>
               </div>
            </div>
            <div class="row" style="margin-bottom: 6px;">
               <span
                  class="col-sm-2 col-lg-2 control-label esx-label no-padding">{{'vm.monitor.tasks.description' | translate}}</span>
               <div class="col-sm-10 col-lg-10 no-padding">
                  <p class="form-control-static">{{currentTask.description}}</p>
               </div>
            </div>
            <div ng-if="currentTask.entity" class="row" style="margin-bottom: 6px;">
               <span class="col-sm-2 col-lg-2 control-label esx-label no-padding">
                  {{'entity.type.' + currentTask.entity.type | translate}}
               </span>
               <div class="col-sm-10 col-lg-10 no-padding">
                  <p class="form-control-static">
                     <a ng-if="currentTask.entity.type === 'VirtualMachine'" href="#/host/vms/{{currentTask.entity.value}}">{{currentTask.entityName}}</a>
                     <span
                        ng-if="currentTask.entity.type === 'HostSystem'">{{'vm.monitor.tasks.host' | translate}}</span>
                  </p>
               </div>
            </div>
            <div class="row" style="margin-bottom: 6px;">
               <span
                  class="col-sm-2 col-lg-2 control-label esx-label no-padding">{{'vm.monitor.tasks.state' | translate}}</span>
               <div class="col-sm-10 col-lg-10 no-padding">
                  <p class="form-control-static">
                     {{'task.state.' + currentTask.state.value | translate}}
                     <span ng-if="currentTask.state.value === 'error'"> - {{currentTask.error.localizedMessage}}</span>
                  </p>
               </div>
            </div>
            <div class="row" style="margin-bottom: 6px;">
               <span
                  class="col-sm-2 col-lg-2 control-label esx-label no-padding">{{'host.monitor.tasks.errors'|translate}}</span>
               <div class="col-sm-10 col-lg-10 no-padding">
                  <p class="form-control-static">
                     <ul ng-if="currentTask.error.fault.faultMessage.length > 0">
                        <li ng-repeat="message in currentTask.error.fault.faultMessage">{{message.message}}</li>
                     </ul>
                  </p>
               </div>
            </div>
            <div class="row" style="margin-bottom: 6px;" ng-if="currentTask.resultFormatted">
               <span
                  class="col-sm-2 col-lg-2 control-label esx-label no-padding">{{'host.monitor.tasks.result'|translate}}</span>
               <div class="col-sm-2 col-lg-10 no-padding">
                  <p class="form-control-static" ng-bind-html="currentTask.resultFormatted"></p>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
